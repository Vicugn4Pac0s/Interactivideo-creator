!function(){"use strict";var t={11:function(t,e,n){function r(t){o.length||i(),o[o.length]=t}t.exports=r;var i,o=[],a=0;function u(){for(;a<o.length;){var t=a;if(a+=1,o[t].call(),a>1024){for(var e=0,n=o.length-a;e<n;e++)o[e]=o[e+a];o.length-=a,a=0}}o.length=0,a=0}var f,c,l,s=void 0!==n.g?n.g:self,h=s.MutationObserver||s.WebKitMutationObserver;function v(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof h?(f=1,c=new h(u),l=document.createTextNode(""),c.observe(l,{characterData:!0}),i=function(){f=-f,l.data=f}):i=v(u),r.requestFlush=i,r.makeRequestCallFromTimer=v},471:function(t,e,n){var r=n(36),i=function t(){if(!(this instanceof t))return new t;var e=this;return e.promise=new r((function(t,n){e.resolve=t,e.reject=n})),e};i.Promise=r,t.exports=i},342:function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(11);function o(){}var a=null,u={};function f(t){if("object"!==r(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,t!==o&&p(t,this)}function c(t,e){for(;3===t._65;)t=t._55;if(f._37&&f._37(t),0===t._65)return 0===t._40?(t._40=1,void(t._72=e)):1===t._40?(t._40=2,void(t._72=[t._72,e])):void t._72.push(e);!function(t,e){i((function(){var n=1===t._65?e.onFulfilled:e.onRejected;if(null!==n){var r=function(t,e){try{return t(e)}catch(t){return a=t,u}}(n,t._55);r===u?s(e.promise,a):l(e.promise,r)}else 1===t._65?l(e.promise,t._55):s(e.promise,t._55)}))}(t,e)}function l(t,e){if(e===t)return s(t,new TypeError("A promise cannot be resolved with itself."));if(e&&("object"===r(e)||"function"==typeof e)){var n=function(t){try{return t.then}catch(t){return a=t,u}}(e);if(n===u)return s(t,a);if(n===t.then&&e instanceof f)return t._65=3,t._55=e,void h(t);if("function"==typeof n)return void p(n.bind(e),t)}t._65=1,t._55=e,h(t)}function s(t,e){t._65=2,t._55=e,f._87&&f._87(t,e),h(t)}function h(t){if(1===t._40&&(c(t,t._72),t._72=null),2===t._40){for(var e=0;e<t._72.length;e++)c(t,t._72[e]);t._72=null}}function v(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1,r=function(t,r,i){try{t((function(t){n||(n=!0,l(e,t))}),(function(t){n||(n=!0,s(e,t))}))}catch(t){return a=t,u}}(t);n||r!==u||(n=!0,s(e,a))}t.exports=f,f._37=null,f._87=null,f._61=o,f.prototype.then=function(t,e){if(this.constructor!==f)return function(t,e,n){return new t.constructor((function(r,i){var a=new f(o);a.then(r,i),c(t,new v(e,n,a))}))}(this,t,e);var n=new f(o);return c(this,new v(t,e,n)),n}},36:function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(342);t.exports=i;var o=s(!0),a=s(!1),u=s(null),f=s(void 0),c=s(0),l=s("");function s(t){var e=new i(i._61);return e._65=1,e._55=t,e}i.resolve=function(t){if(t instanceof i)return t;if(null===t)return u;if(void 0===t)return f;if(!0===t)return o;if(!1===t)return a;if(0===t)return c;if(""===t)return l;if("object"===r(t)||"function"==typeof t)try{var e=t.then;if("function"==typeof e)return new i(e.bind(t))}catch(t){return new i((function(e,n){n(t)}))}return s(t)},i.all=function(t){var e=Array.prototype.slice.call(t);return new i((function(t,n){if(0===e.length)return t([]);var o=e.length;function a(u,f){if(f&&("object"===r(f)||"function"==typeof f)){if(f instanceof i&&f.then===i.prototype.then){for(;3===f._65;)f=f._55;return 1===f._65?a(u,f._55):(2===f._65&&n(f._55),void f.then((function(t){a(u,t)}),n))}var c=f.then;if("function"==typeof c)return void new i(c.bind(f)).then((function(t){a(u,t)}),n)}e[u]=f,0==--o&&t(e)}for(var u=0;u<e.length;u++)a(u,e[u])}))},i.reject=function(t){return new i((function(e,n){n(t)}))},i.race=function(t){return new i((function(e,n){t.forEach((function(t){i.resolve(t).then(e,n)}))}))},i.prototype.catch=function(t){return this.then(null,t)}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t=n(471),e=n.n(t);function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.FileReader=new FileReader}var n,i;return n=t,(i=[{key:"convert",value:function(t){var n=this,r=new(e()),i=0,o=[];return 0===n.checkFile(t)?(r.reject(new Error("error")),r.promise):(t=n.sortFile(t),n.FileReader.readAsDataURL(t[i]),n.FileReader.onload=function(e){o.push({f:i,d:e.target.result}),i++,t[i]?n.FileReader.readAsDataURL(t[i]):r.resolve(o)},r.promise)}},{key:"sortFile",value:function(t){return(t=Object.keys(t).map((function(e){return t[e]}))).sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),t}},{key:"checkFile",value:function(t){for(var e=0;e<t.length;e++)if(-1===t[e].type.indexOf("image"))return 0;return 1}}])&&r(n.prototype,i),t}();function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.selector=document.getElementById("demo-video"),this.aData,this.timer,this.frame=0,this.interval=1e3/15,this.timer_lasttime}var e,n;return e=t,(n=[{key:"play",value:function(t){this.stop(),this.aData=t,this.timer=requestAnimationFrame(this.playTimer.bind(this))}},{key:"stop",value:function(){this.clearPlayTimer(),this.frame=0}},{key:"playTimer",value:function(t){this.timer=requestAnimationFrame(this.playTimer.bind(this));var e=this.interval;if(this.timer_lasttime&&(e=t-this.timer_lasttime),this.interval>e)return!1;this.selector.setAttribute("src",this.aData[this.frame].d),this.frameIncrement(),this.timer_lasttime=t}},{key:"clearPlayTimer",value:function(){if(!this.timer)return!1;cancelAnimationFrame(this.timer),this.timer_lasttime=null}},{key:"frameIncrement",value:function(){this.frame++,this.frame>=this.aData.length&&(this.frame=0)}}])&&o(e.prototype,n),t}();function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!window.File&&!window.FileReader)return alert("File APIをサポートしていません"),!1;this.dataurlConverter=new i,this.player=new a,this.dragEvents()}var e,n;return e=t,(n=[{key:"dragEvents",value:function(){var t=this,e=document.getElementById("dropArea");e.addEventListener("dragover",(function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy",e.classList.contains("active")||e.classList.add("active")})),e.addEventListener("dragleave",(function(t){t.stopPropagation(),t.preventDefault(),e.classList.contains("active")&&e.classList.remove("active")})),e.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault();var n=e.dataTransfer.files;t.dropFile(n)}))}},{key:"dropFile",value:function(t){var e=this;e.dataurlConverter.convert(t).then((function(t){e.player.play(t),e.splitData(t)}),(function(t){console.log(t)}))}},{key:"splitData",value:function(t){var e=[],n=0;return t.forEach((function(t){var r=10*(n+1);t.f>=r&&n++,e[n]||(e[n]={name:"data"+n+".json",data:[]}),e[n].data.push(t)})),e}}])&&u(e.prototype,n),t}();window.InteractivideoCreator=f}()}();